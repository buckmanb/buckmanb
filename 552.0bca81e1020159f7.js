"use strict";(self.webpackChunkblog_app=self.webpackChunkblog_app||[]).push([[552],{1552:(se,P,a)=>{a.r(P),a.d(P,{UserProfileComponent:()=>ie});var u=a(3014),e=a(3107),d=a(4460),m=a(4892),l=a(936),f=a(5329),v=a(9471),h=a(3904),g=a(303),I=a(7702),x=a(3220),p=a(7793),E=a(6389),C=a(7859),M=a(1054),U=a(3933),D=a(7082),j=a(4466);const G=n=>["/blog",n];function L(n,i){1&n&&(e.j41(0,"div",4),e.nrm(1,"mat-spinner",5),e.k0s())}function T(n,i){1&n&&(e.j41(0,"div",6)(1,"mat-card")(2,"mat-card-content")(3,"h2"),e.EFF(4,"User not found"),e.k0s(),e.j41(5,"p"),e.EFF(6,"The user profile you're looking for doesn't exist or you don't have permission to view it."),e.k0s(),e.j41(7,"button",7),e.EFF(8,"Back to Home"),e.k0s()()()())}function $(n,i){if(1&n&&e.nrm(0,"img",38),2&n){let t;const o=e.XpG(2);e.Y8G("src",null==(t=o.userProfile())?null:t.photoURL,e.B4B)}}function Y(n,i){1&n&&(e.j41(0,"mat-icon",39),e.EFF(1,"account_circle"),e.k0s())}function B(n,i){if(1&n&&(e.j41(0,"span",40),e.EFF(1),e.k0s()),2&n){let t;const o=e.XpG(2);e.R7$(),e.SpI(" Last seen: ",o.formatDate(null==(t=o.userProfile())?null:t.lastLogin)," ")}}function S(n,i){if(1&n&&(e.j41(0,"span",41)(1,"mat-icon"),e.EFF(2,"event"),e.k0s(),e.EFF(3),e.k0s()),2&n){let t;const o=e.XpG(2);e.R7$(3),e.SpI(" Joined ",o.formatDate(null==(t=o.userProfile())?null:t.createdAt)," ")}}function A(n,i){if(1&n&&(e.j41(0,"div",42)(1,"p"),e.EFF(2),e.k0s()()),2&n){let t;const o=e.XpG(2);e.R7$(2),e.JRh(null==(t=o.userProfile())?null:t.bio)}}function W(n,i){if(1&n&&(e.j41(0,"a",45)(1,"mat-icon"),e.EFF(2,"language"),e.k0s()()),2&n){let t;const o=e.XpG(3);e.Y8G("href",null==(t=o.userProfile())||null==t.socialLinks?null:t.socialLinks.website,e.B4B)}}function X(n,i){if(1&n&&(e.j41(0,"a",45)(1,"mat-icon"),e.EFF(2,"twitter"),e.k0s()()),2&n){let t;const o=e.XpG(3);e.Y8G("href","https://twitter.com/"+(null==(t=o.userProfile())||null==t.socialLinks?null:t.socialLinks.twitter),e.B4B)}}function w(n,i){if(1&n&&(e.j41(0,"a",45)(1,"mat-icon"),e.EFF(2,"code"),e.k0s()()),2&n){let t;const o=e.XpG(3);e.Y8G("href","https://github.com/"+(null==(t=o.userProfile())||null==t.socialLinks?null:t.socialLinks.github),e.B4B)}}function N(n,i){if(1&n&&(e.j41(0,"a",45)(1,"mat-icon"),e.EFF(2,"work"),e.k0s()()),2&n){let t;const o=e.XpG(3);e.Y8G("href","https://linkedin.com/in/"+(null==(t=o.userProfile())||null==t.socialLinks?null:t.socialLinks.linkedin),e.B4B)}}function K(n,i){if(1&n&&(e.j41(0,"div",43),e.DNE(1,W,3,1,"a",44)(2,X,3,1,"a",44)(3,w,3,1,"a",44)(4,N,3,1,"a",44),e.k0s()),2&n){let t,o,r,c;const _=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(t=_.userProfile())||null==t.socialLinks?null:t.socialLinks.website),e.R7$(),e.Y8G("ngIf",null==(o=_.userProfile())||null==o.socialLinks?null:o.socialLinks.twitter),e.R7$(),e.Y8G("ngIf",null==(r=_.userProfile())||null==r.socialLinks?null:r.socialLinks.github),e.R7$(),e.Y8G("ngIf",null==(c=_.userProfile())||null==c.socialLinks?null:c.socialLinks.linkedin)}}function J(n,i){1&n&&(e.j41(0,"div",4),e.nrm(1,"mat-spinner",46),e.k0s())}function z(n,i){1&n&&(e.j41(0,"button",49)(1,"mat-icon"),e.EFF(2,"add"),e.k0s(),e.EFF(3," Create a Post "),e.k0s())}function Q(n,i){if(1&n&&(e.j41(0,"div",47)(1,"p"),e.EFF(2),e.k0s(),e.DNE(3,z,4,0,"button",48),e.k0s()),2&n){const t=e.XpG(2);e.R7$(2),e.JRh(t.isCurrentUser()?"You haven't published any posts yet.":"This user hasn't published any posts yet."),e.R7$(),e.Y8G("ngIf",t.isCurrentUser()||t.isAdmin())}}function H(n,i){if(1&n&&e.nrm(0,"img",59),2&n){const t=e.XpG().$implicit;e.Y8G("src",t.imageUrl,e.B4B)("alt",t.title)}}function V(n,i){if(1&n&&(e.j41(0,"mat-chip"),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.R7$(),e.JRh(t)}}function Z(n,i){if(1&n&&(e.j41(0,"span",63),e.EFF(1),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(),e.SpI("+",t.tags.length-3," more")}}function q(n,i){if(1&n&&(e.j41(0,"div",60),e.DNE(1,V,2,1,"mat-chip",61)(2,Z,2,1,"span",62),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",t.tags.slice(0,3)),e.R7$(),e.Y8G("ngIf",t.tags.length>3)}}function ee(n,i){if(1&n&&(e.j41(0,"mat-card",52),e.DNE(1,H,1,2,"img",53),e.j41(2,"mat-card-content")(3,"h2",54),e.EFF(4),e.k0s(),e.j41(5,"p",55),e.EFF(6),e.k0s(),e.j41(7,"p",56),e.EFF(8),e.k0s(),e.DNE(9,q,3,2,"div",57),e.k0s(),e.j41(10,"mat-card-actions")(11,"button",58),e.EFF(12," Read More "),e.j41(13,"mat-icon"),e.EFF(14,"arrow_forward"),e.k0s()()()()),2&n){const t=i.$implicit,o=e.XpG(3);e.Y8G("routerLink",e.eq3(6,G,t.id)),e.R7$(),e.Y8G("ngIf",t.imageUrl),e.R7$(3),e.JRh(t.title),e.R7$(2),e.JRh(o.formatDate(t.publishedAt)),e.R7$(2),e.JRh(o.generateExcerpt(t)),e.R7$(),e.Y8G("ngIf",t.tags&&t.tags.length>0)}}function te(n,i){if(1&n&&(e.j41(0,"div",50),e.DNE(1,ee,15,8,"mat-card",51),e.k0s()),2&n){const t=e.XpG(2);e.R7$(),e.Y8G("ngForOf",t.userPosts())}}function ne(n,i){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Subject is required "),e.k0s())}function oe(n,i){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Message content is required "),e.k0s())}function re(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",8)(1,"mat-card",9)(2,"div",10)(3,"div",11),e.DNE(4,$,1,1,"img",12)(5,Y,2,0,"mat-icon",13),e.k0s(),e.j41(6,"div",14)(7,"h1",15),e.EFF(8),e.k0s(),e.j41(9,"div",16)(10,"mat-chip",17),e.EFF(11),e.k0s(),e.DNE(12,B,2,1,"span",18),e.k0s(),e.j41(13,"div",19),e.DNE(14,S,4,1,"span",20),e.k0s(),e.DNE(15,A,3,1,"div",21)(16,K,5,4,"div",22),e.k0s()()(),e.j41(17,"mat-tab-group",23)(18,"mat-tab",24)(19,"div",25),e.DNE(20,J,2,0,"div",1)(21,Q,4,2,"div",26)(22,te,2,1,"div",27),e.k0s()(),e.j41(23,"mat-tab",28)(24,"div",25)(25,"mat-card",29)(26,"mat-card-content")(27,"h2",30),e.EFF(28),e.k0s(),e.j41(29,"form",31),e.bIt("ngSubmit",function(){e.eBV(t);const r=e.XpG();return e.Njj(r.sendMessage())}),e.j41(30,"mat-form-field",32)(31,"mat-label"),e.EFF(32,"Subject"),e.k0s(),e.nrm(33,"input",33),e.DNE(34,ne,2,0,"mat-error",34),e.k0s(),e.j41(35,"mat-form-field",32)(36,"mat-label"),e.EFF(37,"Message"),e.k0s(),e.j41(38,"textarea",35),e.EFF(39,"                      "),e.k0s(),e.DNE(40,oe,2,0,"mat-error",34),e.k0s(),e.j41(41,"div",36)(42,"button",37)(43,"mat-icon"),e.EFF(44,"send"),e.k0s(),e.EFF(45),e.k0s()()()()()()()()()}if(2&n){let t,o,r,c,_,k,O,b,F,R,y;const s=e.XpG();e.R7$(4),e.Y8G("ngIf",null==(t=s.userProfile())?null:t.photoURL),e.R7$(),e.Y8G("ngIf",!(null!=(o=s.userProfile())&&o.photoURL)),e.R7$(3),e.JRh(null==(r=s.userProfile())?null:r.displayName),e.R7$(2),e.Y8G("color",s.getRoleColor((null==(c=s.userProfile())?null:c.role)||"user")),e.R7$(),e.SpI(" ",s.formatRole((null==(_=s.userProfile())?null:_.role)||"user")," "),e.R7$(),e.Y8G("ngIf",null==(k=s.userProfile())?null:k.lastLogin),e.R7$(2),e.Y8G("ngIf",null==(O=s.userProfile())?null:O.createdAt),e.R7$(),e.Y8G("ngIf",null==(b=s.userProfile())?null:b.bio),e.R7$(),e.Y8G("ngIf",s.hasSocialLinks()),e.R7$(4),e.Y8G("ngIf",s.loadingPosts()),e.R7$(),e.Y8G("ngIf",!s.loadingPosts()&&0===s.userPosts().length),e.R7$(),e.Y8G("ngIf",!s.loadingPosts()&&s.userPosts().length>0),e.R7$(6),e.SpI("Send a message to ",null==(F=s.userProfile())?null:F.displayName,""),e.R7$(),e.Y8G("formGroup",s.messageForm),e.R7$(5),e.Y8G("ngIf",null==(R=s.messageForm.get("subject"))?null:R.hasError("required")),e.R7$(6),e.Y8G("ngIf",null==(y=s.messageForm.get("message"))?null:y.hasError("required")),e.R7$(2),e.Y8G("disabled",!s.messageForm.valid||s.messageSending()),e.R7$(3),e.SpI(" ",s.messageSending()?"Sending...":"Send Message"," ")}}let ie=(()=>{class n{route=(0,e.WQX)(m.nX);router=(0,e.WQX)(m.Ix);userService=(0,e.WQX)(U.D);authService=(0,e.WQX)(D.u);blogService=(0,e.WQX)(j.c);fb=(0,e.WQX)(l.ok);snackBar=(0,e.WQX)(C.UG);loading=(0,e.vPA)(!0);userProfile=(0,e.vPA)(null);loadingPosts=(0,e.vPA)(!1);userPosts=(0,e.vPA)([]);messageSending=(0,e.vPA)(!1);messageForm=this.fb.group({subject:["",l.k0.required],message:["",l.k0.required]});ngOnInit(){this.route.paramMap.subscribe(t=>{const o=t.get("id");if(o)this.loadUserProfile(o);else{const r=this.authService.currentUser();r?this.loadUserProfile(r.uid):this.loading.set(!1)}})}loadUserProfile(t){var o=this;return(0,u.A)(function*(){try{o.loading.set(!0);const r=yield o.userService.getUserById(t).toPromise();o.userProfile.set(r||null),r&&o.loadUserPosts(t)}catch(r){console.error("Error loading user profile:",r),o.snackBar.open("Error loading user profile","Close",{duration:3e3})}finally{o.loading.set(!1)}})()}loadUserPosts(t){var o=this;return(0,u.A)(function*(){try{o.loadingPosts.set(!0);const r=yield o.blogService.getPostsByAuthor(t);o.userPosts.set(r)}catch(r){console.error("Error loading user posts:",r)}finally{o.loadingPosts.set(!1)}})()}formatDate(t){if(!t)return"";try{return t&&"function"==typeof t.toDate?t.toDate().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):t instanceof Date?t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"string"==typeof t||"number"==typeof t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}catch(o){return console.error("Error formatting date:",o),""}}formatRole(t){switch(t){case"admin":return"Administrator";case"author":return"Author";case"user":return"Member";default:return t.charAt(0).toUpperCase()+t.slice(1)}}getRoleColor(t){switch(t){case"admin":return"warn";case"author":return"primary";default:return"accent"}}generateExcerpt(t){if(t.excerpt)return t.excerpt;const o=t.content.replace(/<[^>]*>/g,"");return o.substring(0,150)+(o.length>150?"...":"")}hasSocialLinks(){const t=this.userProfile()?.socialLinks;return!!t&&Object.values(t).some(o=>!!o)}isCurrentUser(){const t=this.authService.currentUser();return!!t&&t.uid===this.userProfile()?.uid}isAdmin(){return"admin"===this.authService.profile()?.role}sendMessage(){var t=this;return(0,u.A)(function*(){if(t.messageForm.valid){t.messageSending.set(!0);try{t.messageForm.get("subject"),t.messageForm.get("message"),yield new Promise(c=>setTimeout(c,1e3)),t.snackBar.open("Message sent successfully!","Close",{duration:3e3}),t.messageForm.reset()}catch(o){console.error("Error sending message:",o),t.snackBar.open("Failed to send message. Please try again.","Close",{duration:3e3})}finally{t.messageSending.set(!1)}}})()}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=e.VBU({type:n,selectors:[["app-user-profile"]],decls:4,vars:3,consts:[[1,"profile-container"],["class","loading-container",4,"ngIf"],["class","not-found",4,"ngIf"],["class","profile-content",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"not-found"],["mat-button","","color","primary","routerLink","/"],[1,"profile-content"],[1,"profile-header-card"],[1,"profile-header"],[1,"profile-avatar"],["alt","Profile Picture",3,"src",4,"ngIf"],["class","default-avatar",4,"ngIf"],[1,"profile-info"],[1,"profile-name"],[1,"profile-role"],[3,"color"],["class","last-seen",4,"ngIf"],[1,"profile-meta"],["class","joined-date",4,"ngIf"],["class","profile-bio",4,"ngIf"],["class","social-links",4,"ngIf"],["animationDuration","0ms",1,"profile-tabs"],["label","Posts"],[1,"tab-content"],["class","empty-content",4,"ngIf"],["class","posts-grid",4,"ngIf"],["label","Send Message"],[1,"message-card"],[1,"message-title"],[1,"message-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","subject","placeholder","Message subject"],[4,"ngIf"],["matInput","","formControlName","message","placeholder","Your message...","rows","6"],[1,"form-actions"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["alt","Profile Picture",3,"src"],[1,"default-avatar"],[1,"last-seen"],[1,"joined-date"],[1,"profile-bio"],[1,"social-links"],["target","_blank","class","social-link",3,"href",4,"ngIf"],["target","_blank",1,"social-link",3,"href"],["diameter","30"],[1,"empty-content"],["mat-raised-button","","color","primary","routerLink","/blog/create",4,"ngIf"],["mat-raised-button","","color","primary","routerLink","/blog/create"],[1,"posts-grid"],["class","post-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"post-card",3,"routerLink"],["class","post-image",3,"src","alt",4,"ngIf"],[1,"post-title"],[1,"post-date"],[1,"post-excerpt"],["class","post-tags",4,"ngIf"],["mat-button","","color","primary"],[1,"post-image",3,"src","alt"],[1,"post-tags"],[4,"ngFor","ngForOf"],["class","more-tags",4,"ngIf"],[1,"more-tags"]],template:function(o,r){1&o&&(e.j41(0,"div",0),e.DNE(1,L,2,0,"div",1)(2,T,9,0,"div",2)(3,re,46,18,"div",3),e.k0s()),2&o&&(e.R7$(),e.Y8G("ngIf",r.loading()),e.R7$(),e.Y8G("ngIf",!r.loading()&&!r.userProfile()),e.R7$(),e.Y8G("ngIf",!r.loading()&&r.userProfile()))},dependencies:[d.MD,d.Sq,d.bT,m.iI,m.Wk,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,f.Hu,f.RN,f.YY,f.m2,v.Hl,v.$z,h.m_,h.An,g.RI,g.mq,g.T8,I.w,x.YN,x.Jl,p.RG,p.rl,p.nJ,p.TL,E.fS,E.fg,C._T,M.D6,M.LG],styles:[".profile-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:24px}.loading-container[_ngcontent-%COMP%], .not-found[_ngcontent-%COMP%], .empty-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px;text-align:center;gap:16px}.profile-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.profile-header-card[_ngcontent-%COMP%]{padding:24px}.profile-header[_ngcontent-%COMP%]{display:flex;gap:24px;align-items:flex-start;flex-wrap:wrap}.profile-avatar[_ngcontent-%COMP%]{width:120px;height:120px;overflow:hidden;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;background-color:var(--surface-color);border:2px solid var(--primary-color)}.profile-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.default-avatar[_ngcontent-%COMP%]{font-size:96px;width:96px;height:96px;color:var(--primary-color)}.profile-info[_ngcontent-%COMP%]{flex:1;min-width:280px}.profile-name[_ngcontent-%COMP%]{margin:0 0 8px;font-size:2rem}.profile-role[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px}.last-seen[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.profile-meta[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;color:var(--text-secondary);font-size:.9rem}.joined-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.joined-date[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.profile-bio[_ngcontent-%COMP%]{margin-bottom:16px;line-height:1.5}.social-links[_ngcontent-%COMP%]{display:flex;gap:12px}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:var(--surface-color);color:var(--primary-color);transition:all .2s ease}.social-link[_ngcontent-%COMP%]:hover{background-color:var(--primary-color);color:#fff;transform:translateY(-3px)}.profile-tabs[_ngcontent-%COMP%]{margin-top:16px}.tab-content[_ngcontent-%COMP%]{padding:24px 0}.posts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:24px}.post-card[_ngcontent-%COMP%]{cursor:pointer;height:100%;display:flex;flex-direction:column;transition:transform .2s ease,box-shadow .2s ease}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--elevation-3)}.post-image[_ngcontent-%COMP%]{height:160px;object-fit:cover}.post-title[_ngcontent-%COMP%]{margin:8px 0;font-size:1.25rem;color:var(--text-primary)}.post-date[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin-bottom:8px}.post-excerpt[_ngcontent-%COMP%]{color:var(--text-secondary);line-height:1.4;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;margin-bottom:16px}.post-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px}.more-tags[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);align-self:center}.message-card[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.message-title[_ngcontent-%COMP%]{margin-bottom:24px}.message-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}@media (max-width: 600px){.profile-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.profile-role[_ngcontent-%COMP%], .profile-meta[_ngcontent-%COMP%], .social-links[_ngcontent-%COMP%]{justify-content:center}.posts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return n})()}}]);