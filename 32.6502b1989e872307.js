"use strict";(self.webpackChunkblog_app=self.webpackChunkblog_app||[]).push([[32],{2322:(X,_,s)=>{s.d(_,{HM:()=>v,PO:()=>h});var r=s(3107),b=(s(4460),s(2902));function e(t,p){1&t&&r.nrm(0,"div",2)}const C=new r.nKC("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let v=(()=>{class t{_elementRef=(0,r.WQX)(r.aKT);_ngZone=(0,r.WQX)(r.SKi);_changeDetectorRef=(0,r.WQX)(r.gRc);_renderer=(0,r.WQX)(r.sFG);_cleanupTransitionEnd;_animationMode=(0,r.WQX)(r.bc$,{optional:!0});constructor(){const a=(0,r.WQX)(C,{optional:!0});this._isNoopAnimation="NoopAnimations"===this._animationMode,a&&(a.color&&(this.color=this._defaultColor=a.color),this.mode=a.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(a){this._color=a}_color;_defaultColor="primary";get value(){return this._value}set value(a){this._value=g(a||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(a){this._bufferValue=g(a||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new r.bkB;get mode(){return this._mode}set mode(a){this._mode=a,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}_transitionendHandler=a=>{0===this.animationEnd.observers.length||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(d){return new(d||t)};static \u0275cmp=r.VBU({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(d,m){2&d&&(r.BMQ("aria-valuenow",m._isIndeterminate()?null:m.value)("mode",m.mode),r.HbH("mat-"+m.color),r.AVh("_mat-animation-noopable",m._isNoopAnimation)("mdc-linear-progress--animation-ready",!m._isNoopAnimation)("mdc-linear-progress--indeterminate",m._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",r.Udg],bufferValue:[2,"bufferValue","bufferValue",r.Udg],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(d,m){1&d&&(r.j41(0,"div",0),r.nrm(1,"div",1),r.DNE(2,e,1,0,"div",2),r.k0s(),r.j41(3,"div",3),r.nrm(4,"span",4),r.k0s(),r.j41(5,"div",5),r.nrm(6,"span",4),r.k0s()),2&d&&(r.R7$(),r.xc7("flex-basis",m._getBufferBarFlexBasis()),r.R7$(),r.vxM("buffer"===m.mode?2:-1),r.R7$(),r.xc7("transform",m._getPrimaryBarTransform()))},styles:[".mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\");mask-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E\");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}"],encapsulation:2,changeDetection:0})}return t})();function g(t,p=0,a=100){return Math.max(p,Math.min(a,t))}let h=(()=>{class t{static \u0275fac=function(d){return new(d||t)};static \u0275mod=r.$C({type:t});static \u0275inj=r.G2t({imports:[b.yE]})}return t})()},7032:(X,_,s)=>{s.r(_),s.d(_,{AdminPostsComponent:()=>F});var r=s(4460),l=s(5329),b=s(3904),e=s(3107);function C(i,k){if(1&i&&(e.j41(0,"div",6)(1,"mat-icon"),e.EFF(2),e.k0s(),e.EFF(3),e.nI1(4,"number"),e.k0s()),2&i){const n=e.XpG();e.AVh("positive",n.changePercent>0)("negative",n.changePercent<0),e.R7$(2),e.JRh(n.changePercent>0?"arrow_upward":"arrow_downward"),e.R7$(),e.SpI(" ",e.i5U(4,6,n.changePercent,"1.1-1"),"% ")}}let P=(()=>{class i{label="";value=0;icon="analytics";iconColor="var(--primary-color)";changePercent;static \u0275fac=function(o){return new(o||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-admin-stat-card"]],inputs:{label:"label",value:"value",icon:"icon",iconColor:"iconColor",changePercent:"changePercent"},decls:11,vars:8,consts:[[1,"stat-card"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],["class","stat-change",3,"positive","negative",4,"ngIf"],[1,"stat-icon"],[1,"stat-change"]],template:function(o,c){1&o&&(e.j41(0,"mat-card",0)(1,"mat-card-content")(2,"div",1)(3,"div",2),e.EFF(4),e.nI1(5,"number"),e.k0s(),e.j41(6,"div",3),e.EFF(7),e.k0s(),e.DNE(8,C,5,9,"div",4),e.k0s(),e.j41(9,"mat-icon",5),e.EFF(10),e.k0s()()()),2&o&&(e.R7$(4),e.JRh(e.bMT(5,6,c.value)),e.R7$(3),e.JRh(c.label),e.R7$(),e.Y8G("ngIf",void 0!==c.changePercent),e.R7$(),e.xc7("color",c.iconColor),e.R7$(),e.JRh(c.icon))},dependencies:[r.MD,r.bT,r.QX,l.Hu,l.RN,l.m2,b.m_,b.An],styles:[".stat-card[_ngcontent-%COMP%]{height:100%}.stat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:500;line-height:1;margin-bottom:8px}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.stat-change[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.875rem;margin-top:8px}.stat-change[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px;margin-right:4px}.positive[_ngcontent-%COMP%]{color:var(--success-color)}.negative[_ngcontent-%COMP%]{color:var(--error-color)}.stat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.7}"]})}return i})();var x=s(3014),v=s(9471),g=s(2322),h=s(7859),t=s(4522),p=s(3756);function a(i,k){if(1&i&&(e.j41(0,"div",3),e.nrm(1,"mat-progress-bar",4),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&i){const n=e.XpG();e.R7$(),e.Y8G("value",n.syncProgress()),e.R7$(2),e.SpI("Processing: ",n.syncProgress(),"%")}}function d(i,k){if(1&i&&(e.j41(0,"div",5)(1,"p"),e.EFF(2,"Sync completed successfully"),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s()()),2&i){const n=e.XpG();e.R7$(4),e.SpI("Posts processed: ",n.postsProcessed(),""),e.R7$(2),e.SpI("Total views synced: ",n.totalViews(),"")}}let m=(()=>{class i{firestore=(0,e.WQX)(t._7);snackBar=(0,e.WQX)(h.UG);syncing=(0,e.vPA)(!1);syncProgress=(0,e.vPA)(0);syncComplete=(0,e.vPA)(!1);postsProcessed=(0,e.vPA)(0);totalViews=(0,e.vPA)(0);syncViewCounts(){var n=this;return(0,x.A)(function*(){if(!n.syncing()){n.syncing.set(!0),n.syncProgress.set(0),n.syncComplete.set(!1);try{const o=(0,t.rJ)(n.firestore,"postViews"),c=yield(0,t.GG)(o),f=new Map;c.forEach(u=>{const y=u.data().postId;y&&f.set(y,(f.get(y)||0)+1)});const w=Array.from(f.keys());let M=0,R=0;for(const u of w){const E=(0,t.H9)(n.firestore,`posts/${u}`);if((yield(0,t.x7)(E)).exists()){const A=f.get(u)||0;R+=A;const O=(0,t.H9)(n.firestore,`postStats/${u}`);yield(0,t.BN)(O,{viewCount:A,lastUpdated:(0,p.O5)()},{merge:!0})}M++,n.syncProgress.set(Math.round(M/w.length*100))}n.postsProcessed.set(w.length),n.totalViews.set(R),n.syncComplete.set(!0),n.snackBar.open("View counts synchronized successfully","Close",{duration:5e3})}catch(o){console.error("Error syncing view counts:",o),n.snackBar.open("Error syncing view counts","Close",{duration:5e3})}finally{n.syncing.set(!1)}}})()}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-admin-view-count-sync"]],decls:12,vars:4,consts:[["class","progress-container",4,"ngIf"],["class","stats-container",4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"progress-container"],["mode","determinate",3,"value"],[1,"stats-container"]],template:function(o,c){1&o&&(e.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3,"View Count Synchronization"),e.k0s()(),e.j41(4,"mat-card-content")(5,"p"),e.EFF(6," This tool will count all post views in the postViews collection and update the corresponding entries in the postStats collection. "),e.k0s(),e.DNE(7,a,4,2,"div",0)(8,d,7,2,"div",1),e.k0s(),e.j41(9,"mat-card-actions")(10,"button",2),e.bIt("click",function(){return c.syncViewCounts()}),e.EFF(11),e.k0s()()()),2&o&&(e.R7$(7),e.Y8G("ngIf",c.syncProgress()>0),e.R7$(),e.Y8G("ngIf",c.syncComplete()),e.R7$(2),e.Y8G("disabled",c.syncing()),e.R7$(),e.SpI(" ",c.syncing()?"Syncing...":"Sync View Counts"," "))},dependencies:[r.MD,r.bT,v.Hl,v.$z,l.Hu,l.RN,l.YY,l.m2,l.MM,l.dh,g.PO,g.HM,h._T],styles:[".progress-container[_ngcontent-%COMP%]{margin:20px 0}.stats-container[_ngcontent-%COMP%]{margin:20px 0;padding:10px;background-color:#f0f0f0;border-radius:4px}"]})}return i})(),F=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-admin-posts"]],decls:5,vars:0,consts:[[1,"container"]],template:function(o,c){1&o&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2,"Admin Posts Management"),e.k0s(),e.nrm(3,"app-admin-stat-card")(4,"app-admin-view-count-sync"),e.k0s())},dependencies:[r.MD,l.Hu,m,P],styles:[".container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}"]})}return i})()}}]);