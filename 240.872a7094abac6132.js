"use strict";(self.webpackChunkblog_app=self.webpackChunkblog_app||[]).push([[240],{6240:(at,v,c)=>{c.r(v),c.d(v,{AdminModerationComponent:()=>it});var d=c(3014),t=c(3107),p=c(4460),M=c(4892),m=c(5329),f=c(9471),h=c(3904),_=c(303),A=c(7702),C=c(3220),b=c(7859),F=c(1054),l=c(7544),R=c(7043),y=c(7082),k=c(6927),j=c(4466);function T(i,r){if(1&i&&(t.j41(0,"div",8)(1,"h3"),t.EFF(2,"Flag reason:"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s()()),2&i){const e=t.XpG();t.R7$(4),t.JRh(e.data.comment.flagReason)}}let $=(()=>{class i{dialogRef;data;constructor(e,n){this.dialogRef=e,this.data=n}formatDate(e){return e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}static \u0275fac=function(n){return new(n||i)(t.rXU(l.CP),t.rXU(l.Vh))};static \u0275cmp=t.VBU({type:i,selectors:[["app-view-comment-dialog"]],decls:13,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"post-info"],[1,"date-info"],[1,"comment-content"],["class","flag-info",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],[1,"flag-info"]],template:function(n,o){1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"div",1)(3,"p",2),t.EFF(4),t.k0s(),t.j41(5,"p",3),t.EFF(6),t.k0s(),t.j41(7,"div",4),t.EFF(8),t.k0s(),t.DNE(9,T,5,1,"div",5),t.k0s(),t.j41(10,"div",6)(11,"button",7),t.EFF(12,"Close"),t.k0s()()),2&n&&(t.R7$(),t.SpI("Comment by ",o.data.comment.authorName,""),t.R7$(3),t.SpI("On post: ",o.data.postTitle,""),t.R7$(2),t.SpI("Posted: ",o.formatDate(o.data.comment.createdAt),""),t.R7$(2),t.SpI(" ",o.data.comment.content," "),t.R7$(),t.Y8G("ngIf",o.data.comment.flagReason))},dependencies:[p.MD,p.bT,l.hM,l.tx,l.BI,l.E7,l.Yi,f.Hl,f.$z],styles:[".post-info[_ngcontent-%COMP%], .date-info[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:8px}.comment-content[_ngcontent-%COMP%]{margin:16px 0;padding:16px;background-color:var(--surface-color);border-radius:4px;white-space:pre-wrap}.flag-info[_ngcontent-%COMP%]{margin-top:16px;padding:8px 16px;background-color:#f443361a;border-left:3px solid var(--error-color);border-radius:2px}.flag-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:4px;font-size:1rem;color:var(--error-color)}"]})}return i})();function P(i,r){1&i&&(t.j41(0,"div",10),t.nrm(1,"mat-spinner",11),t.k0s())}function E(i,r){1&i&&(t.j41(0,"div",12)(1,"p"),t.EFF(2,"No pending comments to moderate."),t.k0s()())}function I(i,r){if(1&i&&(t.j41(0,"div",13)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.SpI("Click to load ",e.pendingComments().length," pending comments")}}function x(i,r){if(1&i&&t.nrm(0,"img",25),2&i){const e=t.XpG().$implicit;t.Y8G("src",e.authorPhotoURL,t.B4B)("alt",e.authorName)}}function G(i,r){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"account_circle"),t.k0s())}function L(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",26)(1,"button",22),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.viewFullComment(o))}),t.EFF(2," View Full Comment "),t.k0s()()}}function V(i,r){if(1&i){const e=t.RV6();t.j41(0,"mat-card",17)(1,"mat-card-header")(2,"div",18),t.DNE(3,x,1,2,"img",19)(4,G,2,0,"mat-icon",20),t.k0s(),t.j41(5,"mat-card-title"),t.EFF(6),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8),t.k0s()(),t.j41(9,"mat-card-content")(10,"p"),t.EFF(11),t.k0s(),t.DNE(12,L,3,0,"div",21),t.k0s(),t.j41(13,"mat-card-actions")(14,"button",22),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.approveComment(o))}),t.j41(15,"mat-icon"),t.EFF(16,"check_circle"),t.k0s(),t.EFF(17," Approve "),t.k0s(),t.j41(18,"button",23),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.rejectComment(o))}),t.j41(19,"mat-icon"),t.EFF(20,"block"),t.k0s(),t.EFF(21," Reject "),t.k0s(),t.j41(22,"button",24),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.viewPost(o.postId))}),t.j41(23,"mat-icon"),t.EFF(24,"visibility"),t.k0s(),t.EFF(25," View Post "),t.k0s()()()}if(2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(3),t.Y8G("ngIf",e.authorPhotoURL),t.R7$(),t.Y8G("ngIf",!e.authorPhotoURL),t.R7$(2),t.JRh(e.authorName),t.R7$(2),t.Lme(" ",n.formatDate(e.createdAt)," on post ",n.getPostTitle(e.postId)," "),t.R7$(2),t.AVh("truncated",e.content.length>200),t.R7$(),t.SpI(" ",e.content.length>200?e.content.slice(0,200)+"...":e.content," "),t.R7$(),t.Y8G("ngIf",e.content.length>200)}}function D(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",27)(1,"button",28),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadMorePending())}),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.loadingMore()),t.R7$(),t.SpI(" ",e.loadingMore()?"Loading...":"Load More"," ")}}function S(i,r){if(1&i&&(t.j41(0,"div",14),t.DNE(1,V,26,9,"mat-card",15)(2,D,3,2,"div",16),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.pendingComments()),t.R7$(),t.Y8G("ngIf",e.hasMorePending())}}function B(i,r){1&i&&(t.j41(0,"div",10),t.nrm(1,"mat-spinner",11),t.k0s())}function Y(i,r){1&i&&(t.j41(0,"div",12)(1,"p"),t.EFF(2,"No flagged comments to review."),t.k0s()())}function X(i,r){if(1&i&&(t.j41(0,"div",13)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.SpI("Click to load ",e.flaggedComments().length," flagged comments")}}function N(i,r){if(1&i&&t.nrm(0,"img",25),2&i){const e=t.XpG().$implicit;t.Y8G("src",e.authorPhotoURL,t.B4B)("alt",e.authorName)}}function O(i,r){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"account_circle"),t.k0s())}function w(i,r){if(1&i&&(t.j41(0,"mat-chip",33),t.EFF(1),t.k0s()),2&i){const e=t.XpG(2).$implicit;t.R7$(),t.SpI("Flagged by: ",e.flaggedBy,"")}}function U(i,r){if(1&i&&(t.j41(0,"div",32)(1,"mat-chip",33),t.EFF(2),t.k0s(),t.DNE(3,w,2,1,"mat-chip",34),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(2),t.JRh(e.flagReason),t.R7$(),t.Y8G("ngIf",e.flaggedBy)}}function z(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",26)(1,"button",22),t.bIt("click",function(){t.eBV(e);const o=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.viewFullComment(o))}),t.EFF(2," View Full Comment "),t.k0s()()}}function J(i,r){if(1&i){const e=t.RV6();t.j41(0,"mat-card",30)(1,"mat-card-header")(2,"div",18),t.DNE(3,N,1,2,"img",19)(4,O,2,0,"mat-icon",20),t.k0s(),t.j41(5,"mat-card-title"),t.EFF(6),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8),t.k0s(),t.DNE(9,U,4,2,"div",31),t.k0s(),t.j41(10,"mat-card-content")(11,"p"),t.EFF(12),t.k0s(),t.DNE(13,z,3,0,"div",21),t.k0s(),t.j41(14,"mat-card-actions")(15,"button",22),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.approveComment(o))}),t.j41(16,"mat-icon"),t.EFF(17,"check_circle"),t.k0s(),t.EFF(18," Approve "),t.k0s(),t.j41(19,"button",23),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.rejectComment(o))}),t.j41(20,"mat-icon"),t.EFF(21,"delete"),t.k0s(),t.EFF(22," Delete "),t.k0s(),t.j41(23,"button",24),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.viewPost(o.postId))}),t.j41(24,"mat-icon"),t.EFF(25,"visibility"),t.k0s(),t.EFF(26," View Post "),t.k0s()()()}if(2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(3),t.Y8G("ngIf",e.authorPhotoURL),t.R7$(),t.Y8G("ngIf",!e.authorPhotoURL),t.R7$(2),t.JRh(e.authorName),t.R7$(2),t.Lme(" ",n.formatDate(e.createdAt)," on post ",n.getPostTitle(e.postId)," "),t.R7$(),t.Y8G("ngIf",e.flagReason),t.R7$(2),t.AVh("truncated",e.content.length>200),t.R7$(),t.SpI(" ",e.content.length>200?e.content.slice(0,200)+"...":e.content," "),t.R7$(),t.Y8G("ngIf",e.content.length>200)}}function Q(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",27)(1,"button",28),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadMoreFlagged())}),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.loadingMore()),t.R7$(),t.SpI(" ",e.loadingMore()?"Loading...":"Load More"," ")}}function W(i,r){if(1&i&&(t.j41(0,"div",14),t.DNE(1,J,27,10,"mat-card",29)(2,Q,3,2,"div",16),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.flaggedComments()),t.R7$(),t.Y8G("ngIf",e.hasMoreFlagged())}}function H(i,r){1&i&&(t.j41(0,"div",10),t.nrm(1,"mat-spinner",11),t.k0s())}function Z(i,r){1&i&&(t.j41(0,"div",12)(1,"p"),t.EFF(2,"No recently approved comments."),t.k0s()())}function K(i,r){if(1&i&&(t.j41(0,"div",13)(1,"p"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.SpI("Click to load ",e.recentlyApproved().length," approved comments")}}function q(i,r){if(1&i&&t.nrm(0,"img",25),2&i){const e=t.XpG().$implicit;t.Y8G("src",e.authorPhotoURL,t.B4B)("alt",e.authorName)}}function tt(i,r){1&i&&(t.j41(0,"mat-icon"),t.EFF(1,"account_circle"),t.k0s())}function et(i,r){if(1&i){const e=t.RV6();t.j41(0,"mat-card",36)(1,"mat-card-header")(2,"div",18),t.DNE(3,q,1,2,"img",19)(4,tt,2,0,"mat-icon",20),t.k0s(),t.j41(5,"mat-card-title"),t.EFF(6),t.k0s(),t.j41(7,"mat-card-subtitle"),t.EFF(8),t.k0s()(),t.j41(9,"mat-card-content")(10,"p"),t.EFF(11),t.k0s()(),t.j41(12,"mat-card-actions")(13,"button",24),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(2);return t.Njj(a.viewPost(o.postId))}),t.j41(14,"mat-icon"),t.EFF(15,"visibility"),t.k0s(),t.EFF(16," View Post "),t.k0s()()()}if(2&i){const e=r.$implicit,n=t.XpG(2);t.R7$(3),t.Y8G("ngIf",e.authorPhotoURL),t.R7$(),t.Y8G("ngIf",!e.authorPhotoURL),t.R7$(2),t.JRh(e.authorName),t.R7$(2),t.SpI(" Approved on ",n.formatDate(e.updatedAt)," "),t.R7$(2),t.AVh("truncated",e.content.length>200),t.R7$(),t.SpI(" ",e.content.length>200?e.content.slice(0,200)+"...":e.content," ")}}function nt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",27)(1,"button",28),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.loadMoreRecent())}),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",e.loadingMore()),t.R7$(),t.SpI(" ",e.loadingMore()?"Loading...":"Load More"," ")}}function ot(i,r){if(1&i&&(t.j41(0,"div",14),t.DNE(1,et,17,7,"mat-card",35)(2,nt,3,2,"div",16),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.recentlyApproved()),t.R7$(),t.Y8G("ngIf",e.hasMoreRecent())}}let it=(()=>{class i{commentService=(0,t.WQX)(R.j);blogService=(0,t.WQX)(j.c);authService=(0,t.WQX)(y.u);dialog=(0,t.WQX)(l.bZ);snackBar=(0,t.WQX)(b.UG);pendingComments=(0,t.vPA)([]);flaggedComments=(0,t.vPA)([]);recentlyApproved=(0,t.vPA)([]);pendingLoading=(0,t.vPA)(!0);flaggedLoading=(0,t.vPA)(!0);recentLoading=(0,t.vPA)(!0);loadingMore=(0,t.vPA)(!1);hasMorePending=(0,t.vPA)(!1);hasMoreFlagged=(0,t.vPA)(!1);hasMoreRecent=(0,t.vPA)(!1);pendingLastVisible=null;flaggedLastVisible=null;recentLastVisible=null;activeTab=0;postTitles=new Map;subscriptions=[];ngOnInit(){const e=this.authService.profile();e&&"admin"===e.role?(this.initializeAllTabCounts(),this.loadPendingComments(),this.subscriptions.push(this.commentService.pendingCommentsChanged$.subscribe(()=>{this.loadPendingComments()}))):this.snackBar.open("Only administrators can access this page","Close",{duration:3e3})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}onTabChange(e){const n=this.activeTab;this.activeTab=e.index,console.log(`Tab changed from ${n} to ${this.activeTab}`),1===this.activeTab?(console.log("Loading flagged comments for tab index 1"),this.loadFlaggedComments()):2===this.activeTab&&(console.log("Loading recently approved comments for tab index 2"),this.loadRecentlyApproved())}getCommentsCount(e){var n=this;return(0,d.A)(function*(){try{return n.commentService&&"function"==typeof n.commentService.getPendingComments?"pending"===e?(yield n.commentService.getPendingComments()).comments.length:"flagged"===e?(yield n.commentService.getFlaggedComments()).comments.length:"approved"===e&&"function"==typeof n.commentService.getRecentlyApprovedComments?(yield n.commentService.getRecentlyApprovedComments()).comments.length:"approved"===e?5:0:0}catch(o){return console.error(`Error getting ${e} comments count:`,o),0}})()}initializeAllTabCounts(){var e=this;return(0,d.A)(function*(){try{console.log("Initializing counts for all tabs...");const[n,o,a]=yield Promise.all([e.getCommentsCount("pending"),e.getCommentsCount("flagged"),e.getCommentsCount("approved")]);console.log(`Counts - Pending: ${n}, Flagged: ${o}, Approved: ${a}`),n>0&&0===e.pendingComments().length&&e.pendingComments.set(Array(n).fill(null)),o>0&&0===e.flaggedComments().length&&e.flaggedComments.set(Array(o).fill(null)),a>0&&0===e.recentlyApproved().length&&e.recentlyApproved.set(Array(a).fill(null))}catch(n){console.error("Error initializing tab counts:",n)}})()}loadPendingComments(){var e=this;return(0,d.A)(function*(){try{e.pendingLoading.set(!0);const{comments:n,lastVisible:o}=yield e.commentService.getPendingComments();e.pendingComments.set(n),e.pendingLastVisible=o,e.hasMorePending.set(n.length>=10),e.loadPostTitles(n)}catch(n){console.error("Error loading pending comments:",n),e.snackBar.open("Error loading comments","Close",{duration:3e3})}finally{e.pendingLoading.set(!1)}})()}loadMorePending(){var e=this;return(0,d.A)(function*(){if(e.hasMorePending()&&!e.loadingMore()&&e.pendingLastVisible)try{e.loadingMore.set(!0);const{comments:n,lastVisible:o}=yield e.commentService.getPendingComments(e.pendingLastVisible);e.pendingComments.update(a=>[...a,...n]),e.pendingLastVisible=o,e.hasMorePending.set(n.length>=10),e.loadPostTitles(n)}catch(n){console.error("Error loading more pending comments:",n),e.snackBar.open("Error loading more comments","Close",{duration:3e3})}finally{e.loadingMore.set(!1)}})()}loadFlaggedComments(){var e=this;return(0,d.A)(function*(){try{e.flaggedLoading.set(!0),console.log("Loading flagged comments...");const{comments:n,lastVisible:o}=yield e.commentService.getFlaggedComments();console.log("Flagged comments received:",n),e.flaggedComments.set(n),e.flaggedLastVisible=o,e.hasMoreFlagged.set(n.length>=10),console.log("Flagged comments set in signal:",e.flaggedComments()),e.loadPostTitles(n)}catch(n){console.error("Error loading flagged comments:",n),e.snackBar.open("Error loading flagged comments","Close",{duration:3e3})}finally{e.flaggedLoading.set(!1),console.log("Flagged loading state set to:",e.flaggedLoading())}})()}loadMoreFlagged(){var e=this;return(0,d.A)(function*(){if(e.hasMoreFlagged()&&!e.loadingMore()&&e.flaggedLastVisible)try{e.loadingMore.set(!0);const{comments:n,lastVisible:o}=yield e.commentService.getFlaggedComments(e.flaggedLastVisible);e.flaggedComments.update(a=>[...a,...n]),e.flaggedLastVisible=o,e.hasMoreFlagged.set(n.length>=10),e.loadPostTitles(n)}catch(n){console.error("Error loading more flagged comments:",n),e.snackBar.open("Error loading more comments","Close",{duration:3e3})}finally{e.loadingMore.set(!1)}})()}loadRecentlyApproved(){var e=this;return(0,d.A)(function*(){try{if(e.recentLoading.set(!0),console.log("Loading recently approved comments..."),"function"==typeof e.commentService.getRecentlyApprovedComments){const{comments:n,lastVisible:o}=yield e.commentService.getRecentlyApprovedComments();e.recentlyApproved.set(n),e.recentLastVisible=o,e.hasMoreRecent.set(n.length>=10),e.loadPostTitles(n)}else{const n=yield e.fetchApprovedComments();e.recentlyApproved.set(n),e.hasMoreRecent.set(!1)}console.log("Recently approved comments set:",e.recentlyApproved())}catch(n){console.error("Error loading recently approved comments:",n),e.snackBar.open("Error loading recently approved comments","Close",{duration:3e3})}finally{e.recentLoading.set(!1)}})()}fetchApprovedComments(){var e=this;return(0,d.A)(function*(){try{return(yield e.commentService.loadCommentsForPost("*")).filter(o=>"approved"===o.status).sort((o,a)=>{const s=o.updatedAt?.toDate?o.updatedAt.toDate():new Date(o.updatedAt||0);return(a.updatedAt?.toDate?a.updatedAt.toDate():new Date(a.updatedAt||0)).getTime()-s.getTime()}).slice(0,10)}catch(n){return console.error("Error fetching approved comments:",n),[]}})()}loadMoreRecent(){var e=this;return(0,d.A)(function*(){if(e.hasMoreRecent()&&!e.loadingMore()&&e.recentLastVisible)try{e.loadingMore.set(!0);const{comments:n,lastVisible:o}=yield e.commentService.getRecentlyApprovedComments(e.recentLastVisible);e.recentlyApproved.update(a=>[...a,...n]),e.recentLastVisible=o,e.hasMoreRecent.set(n.length>=10),e.loadPostTitles(n)}catch(n){console.error("Error loading more recently approved comments:",n),e.snackBar.open("Error loading more comments","Close",{duration:3e3})}finally{e.loadingMore.set(!1)}})()}loadPostTitles(e){var n=this;return(0,d.A)(function*(){const o=new Set;e.forEach(a=>{n.postTitles.has(a.postId)||o.add(a.postId)});for(const a of o)try{const s=yield n.blogService.getPostById(a);n.postTitles.set(a,s?s.title:"[Post not found]")}catch(s){console.error(`Error loading post ${a}:`,s),n.postTitles.set(a,"[Error loading post]")}})()}getPostTitle(e){return this.postTitles.get(e)||"[Loading...]"}formatDate(e){return e?(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):""}viewFullComment(e){this.dialog.open($,{data:{comment:e,postTitle:this.getPostTitle(e.postId)},width:"600px"})}approveComment(e){var n=this;return(0,d.A)(function*(){try{yield n.commentService.moderateComment(e.id,"approved"),0===n.activeTab?n.pendingComments.update(o=>o.filter(a=>a.id!==e.id)):1===n.activeTab&&n.flaggedComments.update(o=>o.filter(a=>a.id!==e.id)),n.snackBar.open("Comment approved","Close",{duration:3e3})}catch(o){console.error("Error approving comment:",o),n.snackBar.open("Error approving comment","Close",{duration:3e3})}})()}rejectComment(e){var n=this;this.dialog.open(k.w,{data:{title:"Reject Comment",message:"Are you sure you want to delete this comment? This action cannot be undone.",confirmButton:"Delete",cancelButton:"Cancel",color:"warn"}}).afterClosed().subscribe(function(){var a=(0,d.A)(function*(s){if(s)try{yield n.commentService.deleteComment(e.id),0===n.activeTab?n.pendingComments.update(g=>g.filter(u=>u.id!==e.id)):1===n.activeTab&&n.flaggedComments.update(g=>g.filter(u=>u.id!==e.id)),n.snackBar.open("Comment deleted","Close",{duration:3e3})}catch(g){console.error("Error deleting comment:",g),n.snackBar.open("Error deleting comment","Close",{duration:3e3})}});return function(s){return a.apply(this,arguments)}}())}viewPost(e){window.open(`/blog/${e}`,"_blank")}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=t.VBU({type:i,selectors:[["app-admin-moderation"]],decls:22,vars:16,consts:[[1,"moderation-container"],[1,"page-title"],[3,"selectedTabChange"],[3,"label"],[1,"tab-content"],["class","loading-container",4,"ngIf"],["class","empty-message",4,"ngIf"],["class","placeholder-container",4,"ngIf"],["class","comments-list",4,"ngIf"],["label","Recently Approved"],[1,"loading-container"],["diameter","40"],[1,"empty-message"],[1,"placeholder-container"],[1,"comments-list"],["class","comment-card",4,"ngFor","ngForOf"],["class","load-more",4,"ngIf"],[1,"comment-card"],["mat-card-avatar","",1,"comment-avatar"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],["class","view-more",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-button","",3,"click"],[3,"src","alt"],[1,"view-more"],[1,"load-more"],["mat-button","","color","primary",3,"click","disabled"],["class","comment-card flagged",4,"ngFor","ngForOf"],[1,"comment-card","flagged"],["class","flag-reason",4,"ngIf"],[1,"flag-reason"],["color","warn","selected",""],["color","warn","selected","",4,"ngIf"],["class","comment-card approved",4,"ngFor","ngForOf"],[1,"comment-card","approved"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2,"Comment Moderation"),t.k0s(),t.j41(3,"mat-tab-group",2),t.bIt("selectedTabChange",function(s){return o.onTabChange(s)}),t.j41(4,"mat-tab",3)(5,"div",4),t.DNE(6,P,2,0,"div",5)(7,E,3,0,"div",6)(8,I,3,1,"div",7)(9,S,3,2,"div",8),t.k0s()(),t.j41(10,"mat-tab",3)(11,"div",4),t.DNE(12,B,2,0,"div",5)(13,Y,3,0,"div",6)(14,X,3,1,"div",7)(15,W,3,2,"div",8),t.k0s()(),t.j41(16,"mat-tab",9)(17,"div",4),t.DNE(18,H,2,0,"div",5)(19,Z,3,0,"div",6)(20,K,3,1,"div",7)(21,ot,3,2,"div",8),t.k0s()()()()),2&n&&(t.R7$(4),t.Mz_("label","Pending (",o.pendingComments().length,")"),t.R7$(2),t.Y8G("ngIf",o.pendingLoading()),t.R7$(),t.Y8G("ngIf",!o.pendingLoading()&&0===o.pendingComments().length),t.R7$(),t.Y8G("ngIf",!o.pendingLoading()&&null===o.pendingComments()[0]),t.R7$(),t.Y8G("ngIf",!o.pendingLoading()&&o.pendingComments().length>0),t.R7$(),t.Mz_("label","Flagged (",o.flaggedComments().length,")"),t.R7$(2),t.Y8G("ngIf",o.flaggedLoading()),t.R7$(),t.Y8G("ngIf",!o.flaggedLoading()&&0===o.flaggedComments().length),t.R7$(),t.Y8G("ngIf",!o.flaggedLoading()&&null===o.flaggedComments()[0]),t.R7$(),t.Y8G("ngIf",!o.flaggedLoading()&&o.flaggedComments().length>0),t.R7$(3),t.Y8G("ngIf",o.recentLoading()),t.R7$(),t.Y8G("ngIf",!o.recentLoading()&&0===o.recentlyApproved().length),t.R7$(),t.Y8G("ngIf",!o.recentLoading()&&null===o.recentlyApproved()[0]),t.R7$(),t.Y8G("ngIf",!o.recentLoading()&&o.recentlyApproved().length>0))},dependencies:[p.MD,p.Sq,p.bT,M.iI,m.Hu,m.RN,m.YY,m.QG,m.m2,m.MM,m.Lc,m.dh,f.Hl,f.$z,h.m_,h.An,_.RI,_.mq,_.T8,A.w,C.YN,C.Jl,b._T,F.D6,F.LG,l.hM],styles:[".moderation-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}.page-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:24px}.tab-content[_ngcontent-%COMP%]{padding:16px 0}.comment-card[_ngcontent-%COMP%]{margin-bottom:16px;transition:transform .2s ease,box-shadow .2s ease}.comment-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--elevation-2)}.comment-card.flagged[_ngcontent-%COMP%]{border-left:4px solid var(--error-color)}.comment-card.approved[_ngcontent-%COMP%]{border-left:4px solid var(--success-color)}.comment-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:var(--surface-color)}.comment-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.flag-reason[_ngcontent-%COMP%]{margin-left:auto}.truncated[_ngcontent-%COMP%]{white-space:normal;overflow:hidden;text-overflow:ellipsis}.view-more[_ngcontent-%COMP%]{text-align:right;margin-top:8px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:32px}.empty-message[_ngcontent-%COMP%]{text-align:center;padding:32px;color:var(--text-secondary)}.load-more[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:16px}.placeholder-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px;border:2px dashed var(--border-color);border-radius:8px;margin:16px 0;padding:24px;text-align:center;cursor:pointer;transition:background-color .2s ease}.placeholder-container[_ngcontent-%COMP%]:hover{background-color:rgba(var(--primary-color-rgb),.05)}.placeholder-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary)}.comments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}"]})}return i})()}}]);