"use strict";(self.webpackChunkblog_app=self.webpackChunkblog_app||[]).push([[914],{1914:(w,f,a)=>{a.r(f),a.d(f,{UserSettingsComponent:()=>N});var _=a(3014),e=a(3107),d=a(4460),l=a(936),p=a(5329),m=a(7793),g=a(6389),E=a(9471),F=a(3904),k=a(7859),b=a(1054),c=a(303),h=a(7702),P=a(4892),D=a(7082),L=a(2115);function O(r,s){1&r&&(e.j41(0,"div",11),e.nrm(1,"mat-spinner",12),e.k0s())}function j(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Display name is required "),e.k0s())}function y(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Please enter a valid URL "),e.k0s())}function x(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Please enter a valid URL "),e.k0s())}function T(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Please enter a valid URL "),e.k0s())}function A(r,s){1&r&&(e.j41(0,"mat-error"),e.EFF(1," Please enter a valid URL "),e.k0s())}function S(r,s){1&r&&(e.j41(0,"mat-icon"),e.EFF(1,"save"),e.k0s())}function B(r,s){1&r&&e.nrm(0,"mat-spinner",34)}function G(r,s){if(1&r){const t=e.RV6();e.j41(0,"form",13),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateProfile())}),e.j41(1,"div",14)(2,"app-image-upload",15),e.bIt("imageUploaded",function(i){e.eBV(t);const u=e.XpG();return e.Njj(u.onProfileImageUploaded(i))})("imageRemoved",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onProfileImageRemoved())}),e.k0s()(),e.j41(3,"h3"),e.EFF(4,"Basic Information"),e.k0s(),e.j41(5,"mat-form-field",16)(6,"mat-label"),e.EFF(7,"Display Name"),e.k0s(),e.nrm(8,"input",17),e.DNE(9,j,2,0,"mat-error",18),e.k0s(),e.j41(10,"mat-form-field",16)(11,"mat-label"),e.EFF(12,"Email"),e.k0s(),e.nrm(13,"input",19),e.j41(14,"mat-hint"),e.EFF(15,"Email cannot be changed"),e.k0s()(),e.j41(16,"mat-form-field",16)(17,"mat-label"),e.EFF(18,"Bio"),e.k0s(),e.j41(19,"textarea",20),e.EFF(20,"                  "),e.k0s(),e.j41(21,"mat-hint",21),e.EFF(22),e.k0s()(),e.j41(23,"h3"),e.EFF(24,"Social Media Links"),e.k0s(),e.j41(25,"div",22)(26,"mat-form-field",16)(27,"mat-label"),e.EFF(28,"Twitter"),e.k0s(),e.j41(29,"mat-icon",23),e.EFF(30,"link"),e.k0s(),e.nrm(31,"input",24),e.DNE(32,y,2,0,"mat-error",18),e.k0s(),e.j41(33,"mat-form-field",16)(34,"mat-label"),e.EFF(35,"LinkedIn"),e.k0s(),e.j41(36,"mat-icon",23),e.EFF(37,"link"),e.k0s(),e.nrm(38,"input",25),e.DNE(39,x,2,0,"mat-error",18),e.k0s(),e.j41(40,"mat-form-field",16)(41,"mat-label"),e.EFF(42,"GitHub"),e.k0s(),e.j41(43,"mat-icon",23),e.EFF(44,"code"),e.k0s(),e.nrm(45,"input",26),e.DNE(46,T,2,0,"mat-error",18),e.k0s(),e.j41(47,"mat-form-field",16)(48,"mat-label"),e.EFF(49,"Personal Website"),e.k0s(),e.j41(50,"mat-icon",23),e.EFF(51,"language"),e.k0s(),e.nrm(52,"input",27),e.DNE(53,A,2,0,"mat-error",18),e.k0s()(),e.j41(54,"h3"),e.EFF(55,"Account Information"),e.k0s(),e.j41(56,"div",28)(57,"p")(58,"strong"),e.EFF(59,"Role:"),e.k0s(),e.j41(60,"span",29),e.EFF(61),e.k0s()(),e.j41(62,"p")(63,"strong"),e.EFF(64,"Member since:"),e.k0s(),e.EFF(65),e.k0s(),e.j41(66,"p")(67,"strong"),e.EFF(68,"Last login:"),e.k0s(),e.EFF(69),e.k0s()(),e.nrm(70,"mat-divider",30),e.j41(71,"div",31)(72,"button",32),e.DNE(73,S,2,0,"mat-icon",18)(74,B,1,0,"mat-spinner",33),e.EFF(75," Update Profile "),e.k0s()()()}if(2&r){let t,n,i,u,C,U,I,v,R,M;const o=e.XpG();e.Y8G("formGroup",o.profileForm),e.R7$(2),e.Y8G("initialImageUrl",(null==(t=o.profile())?null:t.photoURL)||""),e.R7$(7),e.Y8G("ngIf",null==(n=o.profileForm.get("displayName"))?null:n.hasError("required")),e.R7$(13),e.SpI("",(null==(i=o.profileForm.get("bio"))||null==i.value?null:i.value.length)||0,"/500"),e.R7$(10),e.Y8G("ngIf",null==(u=o.profileForm.get("socialLinks.twitter"))?null:u.hasError("pattern")),e.R7$(7),e.Y8G("ngIf",null==(C=o.profileForm.get("socialLinks.linkedin"))?null:C.hasError("pattern")),e.R7$(7),e.Y8G("ngIf",null==(U=o.profileForm.get("socialLinks.github"))?null:U.hasError("pattern")),e.R7$(7),e.Y8G("ngIf",null==(I=o.profileForm.get("socialLinks.website"))?null:I.hasError("pattern")),e.R7$(7),e.Y8G("ngClass",o.getRoleBadgeClass()),e.R7$(),e.SpI(" ",(null==(v=o.profile())?null:v.role)||"User"," "),e.R7$(4),e.SpI(" ",o.formatDate(null==(R=o.profile())?null:R.createdAt),""),e.R7$(4),e.SpI(" ",o.formatDate(null==(M=o.profile())?null:M.lastLogin),""),e.R7$(3),e.Y8G("disabled",o.profileForm.invalid||o.updating()||!o.profileForm.dirty),e.R7$(),e.Y8G("ngIf",!o.updating()),e.R7$(),e.Y8G("ngIf",o.updating())}}let N=(()=>{class r{authService=(0,e.WQX)(D.u);fb=(0,e.WQX)(l.ok);snackBar=(0,e.WQX)(k.UG);profile=(0,e.vPA)(null);loading=(0,e.vPA)(!0);updating=(0,e.vPA)(!1);profileForm;urlPattern="^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$";constructor(){this.profileForm=this.fb.group({displayName:["",l.k0.required],email:[{value:"",disabled:!0}],bio:["",l.k0.maxLength(500)],socialLinks:this.fb.group({twitter:["",l.k0.pattern(this.urlPattern)],linkedin:["",l.k0.pattern(this.urlPattern)],github:["",l.k0.pattern(this.urlPattern)],website:["",l.k0.pattern(this.urlPattern)]})})}ngOnInit(){this.loadUserProfile()}loadUserProfile(){var t=this;return(0,_.A)(function*(){try{t.loading.set(!0);const n=t.authService.profile();n&&(t.profile.set(n),t.profileForm.patchValue({displayName:n.displayName||"",email:n.email||"",bio:n.bio||"",socialLinks:{twitter:n.socialLinks?.twitter||"",linkedin:n.socialLinks?.linkedin||"",github:n.socialLinks?.github||"",website:n.socialLinks?.website||""}}))}catch(n){console.error("Error loading profile:",n),t.snackBar.open("Error loading profile information","Close",{duration:5e3})}finally{t.loading.set(!1)}})()}updateProfile(){var t=this;return(0,_.A)(function*(){if(!t.profileForm.invalid){t.updating.set(!0);try{const n=t.profileForm.getRawValue(),i={displayName:n.displayName,bio:n.bio||null,socialLinks:{twitter:n.socialLinks.twitter||null,linkedin:n.socialLinks.linkedin||null,github:n.socialLinks.github||null,website:n.socialLinks.website||null}};t.profileImageUrl&&(i.photoURL=t.profileImageUrl),yield t.authService.updateUserProfile(i),t.snackBar.open("Profile updated successfully","Close",{duration:3e3}),t.profileForm.markAsPristine()}catch(n){console.error("Error updating profile:",n),t.snackBar.open("Error updating profile","Close",{duration:5e3})}finally{t.updating.set(!1)}}})()}profileImageUrl;onProfileImageUploaded(t){this.profileImageUrl=t.secure_url,this.profileForm.markAsDirty()}onProfileImageRemoved(){this.profileImageUrl="",this.profileForm.markAsDirty()}getRoleBadgeClass(){return(this.profile()?.role||"user").toLowerCase()}formatDate(t){return t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}deleteAccount(){var t=this;return(0,_.A)(function*(){if(confirm("Are you sure you want to delete your account? This action cannot be undone."))try{t.updating.set(!0),t.snackBar.open("Your account has been deleted","Close",{duration:5e3})}catch(n){console.error("Error deleting account:",n),t.snackBar.open("Error deleting account","Close",{duration:5e3})}finally{t.updating.set(!1)}})()}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=e.VBU({type:r,selectors:[["app-user-settings"]],decls:28,vars:3,consts:[[1,"profile-container"],["label","Profile Information"],["class","loading-container",4,"ngIf"],["class","profile-form",3,"formGroup","ngSubmit",4,"ngIf"],["label","Account Settings"],[1,"account-settings"],[1,"settings-section"],["mat-raised-button","","color","primary","routerLink","/auth/change-password"],[1,"danger-zone"],[1,"warning-text"],["mat-raised-button","","color","warn",3,"click","disabled"],[1,"loading-container"],["diameter","40"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"image-upload-container"],[3,"imageUploaded","imageRemoved","initialImageUrl"],["appearance","outline",1,"full-width"],["matInput","","formControlName","displayName","placeholder","Enter your display name"],[4,"ngIf"],["matInput","","formControlName","email","placeholder","Your email address","readonly",""],["matInput","","formControlName","bio","placeholder","Tell us about yourself","rows","3"],["align","end"],["formGroupName","socialLinks"],["matPrefix",""],["matInput","","formControlName","twitter","placeholder","Your Twitter URL"],["matInput","","formControlName","linkedin","placeholder","Your LinkedIn URL"],["matInput","","formControlName","github","placeholder","Your GitHub URL"],["matInput","","formControlName","website","placeholder","Your website URL"],[1,"role-info"],[1,"role-badge",3,"ngClass"],[1,"section-divider"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","24",4,"ngIf"],["diameter","24"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4,"Your Profile"),e.k0s()(),e.j41(5,"mat-card-content")(6,"mat-tab-group")(7,"mat-tab",1),e.DNE(8,O,2,0,"div",2)(9,G,76,15,"form",3),e.k0s(),e.j41(10,"mat-tab",4)(11,"div",5)(12,"h3"),e.EFF(13,"Account Actions"),e.k0s(),e.j41(14,"div",6)(15,"button",7)(16,"mat-icon"),e.EFF(17,"lock"),e.k0s(),e.EFF(18," Change Password "),e.k0s()(),e.j41(19,"div",8)(20,"h3"),e.EFF(21,"Danger Zone"),e.k0s(),e.j41(22,"p",9),e.EFF(23,"These actions are irreversible. Please proceed with caution."),e.k0s(),e.j41(24,"button",10),e.bIt("click",function(){return i.deleteAccount()}),e.j41(25,"mat-icon"),e.EFF(26,"delete_forever"),e.k0s(),e.EFF(27," Delete Account "),e.k0s()()()()()()()()),2&n&&(e.R7$(8),e.Y8G("ngIf",i.loading()),e.R7$(),e.Y8G("ngIf",!i.loading()),e.R7$(15),e.Y8G("disabled",i.loading()||i.updating()))},dependencies:[d.MD,d.YU,d.bT,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.$R,p.Hu,p.RN,p.m2,p.MM,p.dh,m.RG,m.rl,m.nJ,m.MV,m.TL,m.JW,g.fS,g.fg,E.Hl,E.$z,F.m_,F.An,k._T,b.D6,b.LG,c.RI,c.mq,c.T8,h.w,h.q,P.iI,P.Wk,L.W],styles:[".profile-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:32px 16px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px 0}.profile-form[_ngcontent-%COMP%]{padding:16px 0}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.image-upload-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:24px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}h3[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px;color:var(--text-primary);font-weight:500}.role-info[_ngcontent-%COMP%]{margin-bottom:24px}.role-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.85rem;text-transform:capitalize}.role-badge.admin[_ngcontent-%COMP%]{background-color:#7b1fa2;color:#fff}.role-badge.author[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.role-badge.user[_ngcontent-%COMP%]{background-color:#757575;color:#fff}.section-divider[_ngcontent-%COMP%]{margin:24px 0}.account-settings[_ngcontent-%COMP%]{padding:16px 0}.settings-section[_ngcontent-%COMP%]{margin-bottom:24px}.danger-zone[_ngcontent-%COMP%]{border:1px solid #f44336;border-radius:4px;padding:16px;margin-top:24px}.warning-text[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}"]})}return r})()}}]);